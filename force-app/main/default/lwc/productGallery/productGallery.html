<template>
    <lightning-layout multiple-rows="true" horizontal-align="true">
        <lightning-layout-item size="12">
            <lightning-card title="Gallery">
                <div style="margin-left: 1%;" class="slds-var-m-vertical_medium">
                    <lightning-file-upload
                        name="fileUploader"
                        accept={acceptedFormats}
                        record-id={recordId}
                        onuploadfinished={handleUploadFinished}
                        multiple
                    >
                    </lightning-file-upload>
                </div>
                <template if:true={isLoading}>
                    <div class="slds-is-relative">
                        <lightning-spinner
                            alternative-text="Loading..." variant="brand">
                        </lightning-spinner>
                    </div>
                </template>
                <template if:false={isLoading}>
                    <div
                        class="
                            slds-page-header__row
                            slds-var-m-top_x-small
                            slds-var-m-left_medium
                            slds-grid slds-wrap
                        "
                    >
                        <ul class="slds-grid slds-wrap slds-gutters">
                            <template if:false={loaded}>
                                There are no any images in the gallery yet.
                            </template>
                            <template if:true={loaded}>
                                <template for:each={files} for:item="file">
                                    <div key={file.Id}>
                                        <c-preview-image                                      
                                            file={file}
                                            record-id={recordId}
                                            thumbnail={file.thumbnailFileCard}
                                            ondeletefile={handleDeleteFile}
                                        ></c-preview-image>
                                    </div>
                                </template>
                            </template>
                        </ul>
                    </div>
                </template>                           
            </lightning-card>
        </lightning-layout-item>        
    </lightning-layout>
</template>
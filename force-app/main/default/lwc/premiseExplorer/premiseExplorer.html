<template>
    <template if:false={isMyMeetings}>
        <template if:false={isDetail}>
            <lightning-layout title="Product Explorer" multiple-rows="true" class="slds-card">
                <lightning-layout-item size="12" style="background-color: #000066;">
                    <div class="slds-text-title" style="font-size: 25px; font-weight: bold; margin-left: 45%; width: 40%; margin-top: 1%; margin-bottom: 1%; color: white;">{label.findproperty}</div>
                </lightning-layout-item>
                <!-- search -->
                <template if:false={isLastSeen}>
                    <lightning-layout-item size="12" style="background-color: #000066;">
                        <div style="margin-left: 30%; width: 40%;">           
                            <lightning-layout horizontal-align="middle" multiple-rows="true">
                                <lightning-layout-item size="12">
                                    <lightning-input style="-webkit-text-fill-color:white;" type="text" label={label.productname} value={productName} onchange={handleProductNameChange}></lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item size="12">
                                    <lightning-input style="-webkit-text-fill-color:white;" type="text" label={label.productcity} value={productCity} onchange={handleProductCityChange}></lightning-input>
                                </lightning-layout-item>
                                <template if:true={showFilter}>
                                    <lightning-layout style="width: 100%;" multiple-rows="true">
                                        <lightning-layout-item size="12">
                                            <lightning-slider style="-webkit-text-fill-color:white;" label={label.maxprice} value={maxPrice} step="0.01" min="0" max="200000" onchange={handleMaxPriceChange}></lightning-slider>
                                        </lightning-layout-item>
                                        <lightning-layout-item size="12">
                                            <lightning-slider style="-webkit-text-fill-color:white;" label={label.minsize} value={minSize} step="0.01" min="0" max="100" onchange={handleSizeChange}></lightning-slider>
                                        </lightning-layout-item>
                                        <lightning-layout-item size="12">
                                            <lightning-layout>
                                                <lightning-layout-item size="3">
                                                    <lightning-input id="checkbox-wifi" style="-webkit-text-fill-color:white;" type="checkbox" name="wifi" label={label.wifi} value={wifi} onchange={handleWifiChange}></lightning-input>
                                                </lightning-layout-item>
                                                <lightning-layout-item size="3">
                                                    <lightning-input id="checkbox-parking" style="-webkit-text-fill-color:white;" type="checkbox" name="parking" label={label.parking} value={parking} onchange={handleParkingChange}></lightning-input>
                                                </lightning-layout-item>
                                                <lightning-layout-item size="3">
                                                    <lightning-input id="checkbox-elevator" style="-webkit-text-fill-color:white;" type="checkbox" name="elevator" label={label.elevator} value={elevator} onchange={handleElevatorChange}></lightning-input>
                                                </lightning-layout-item>
                                                <lightning-layout-item size="3">
                                                    <lightning-input id="checkbox-kitchen" style="-webkit-text-fill-color:white;" type="checkbox" name="kitchen" label={label.kitchen} value={kitchen} onchange={handleKitchenChange}></lightning-input>
                                                </lightning-layout-item>
                                            </lightning-layout>
                                        </lightning-layout-item>
                                    </lightning-layout>
                                </template>
                            </lightning-layout>
                            <div class="slds-var-m-vertical_medium">
                                <template if:true={showFilter}>
                                    <lightning-button icon-name="utility:filterList" icon-position="right" variant="neutral" label={label.hidefilter} onclick={hideFilter} class="search-button filter-button" style="margin-right: 5px;"></lightning-button>
                                </template>
                                <template if:false={showFilter}>
                                    <lightning-button icon-name="utility:filterList" icon-position="right" variant="neutral" label={label.filter} onclick={displayFilter} class="search-button filter-button" style="margin-right: 5px;"></lightning-button>
                                </template>
                                <template if:true={showFilter}>
                                    <lightning-button variant="neutral" label={label.clearfilter} onclick={clearFilter} class="search-button filter-button" style="margin-right: 5px;"></lightning-button>
                                </template>
                                <template if:true={isLogged}>
                                </template>
                            </div>
                        </div>               
                    </lightning-layout-item>
                </template>
                <template if:true={isLastSeen}>
                    <lightning-layout-item size="12" style="background-color: #000066;">
                        <div style="margin-left: 30%; width: 40%; margin-bottom: 2%;">           
                            <lightning-layout horizontal-align="middle" multiple-rows="true">
                                <lightning-layout-item size="12">
                                    <lightning-input style="-webkit-text-fill-color:white;" type="text" label="Product Name" value={seenProductName} onchange={handleSeenName}></lightning-input>
                                </lightning-layout-item>
                                <lightning-layout-item size="12">
                                    <lightning-input style="-webkit-text-fill-color:white;" type="text" label="Product City" value={seenProductCity} onchange={handleSeenCity}></lightning-input>
                                </lightning-layout-item>
                            </lightning-layout>
                        </div>               
                    </lightning-layout-item>
                </template>

                <!-- spinner -->
                <template if:true={loading}>
                    <lightning-spinner variant="brand" alternative-text="Loading..." size="medium"></lightning-spinner>
                </template>

                <!-- results -->
                <template if:false={isLastSeen}>
                    <lightning-layout-item size="12" style="margin-left: 1%; width: 99%;">
                        <template if:true={noProducts}>
                            <h2>{label.noproductsfound}</h2>
                        </template>
                        <template if:true={productsDisplayed}>
                            <div class="slds-scrollable_y">
                                <lightning-layout horizontal-align="center" multiple-rows>
                                    <template for:each={products} for:item="product">
                                        <lightning-layout-item key={product.Id} padding="around-small" size="2">
                                            <c-product-tile product={product} onproductselect={selectProduct} selected-product-id={selectedProductId}></c-product-tile>
                                        </lightning-layout-item>
                                    </template>
                                </lightning-layout>
                            </div>
                        </template>
                    </lightning-layout-item>
                </template>
                <template if:true={isLastSeen}>
                    <lightning-layout-item size="12" style="margin: 1%; width: 98%;">
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <lightning-button icon-name="utility:chevronleft" variant="neutral" label="Back" onclick={backFromRecentlyViewed} class="search-button filter-button" style="margin-right: 5px;"></lightning-button>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <div class="slds-text-title" style="font-size: 20px; padding: 10px; margin-left: 41%;">{label.recentlyviewedproperties}</div>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <template if:false={isLogged}>
                                    <h2>{label.mustlogin1}</h2>
                                </template>
                                <template if:true={isLogged}>
                                    <template if:false={arelastproducts}>
                                        <h2>{label.noproductsfound}</h2>
                                    </template>
                                    <template if:true={arelastproducts}>
                                        <div class="slds-scrollable_y">
                                            <lightning-layout horizontal-align="center" multiple-rows="true">
                                                <template for:each={lastproducts} for:item="lastproduct">
                                                    <lightning-layout-item key={lastproduct.Id} padding="around-small" size="2">
                                                        <c-product-tile product={lastproduct} onproductselect={selectLastProduct} selected-product-id={selectedProductId}></c-product-tile>
                                                    </lightning-layout-item>
                                                </template>
                                            </lightning-layout>
                                        </div>
                                    </template>
                                </template>
                            </lightning-layout-item>
                        </lightning-layout>
                    </lightning-layout-item>
                </template>

                <!-- pagination -->
                <template if:false={isLastSeen}>
                    <lightning-layout-item size="12" style="margin-left: 35%; width: 31%;">
                        <div class="slds-var-m-vertical_medium">
                            <template if:true={productsDisplayed}>
                                <lightning-layout>
                                    <lightning-layout-item>
                                        <lightning-button label={label.first}  
                                            icon-name="utility:arrow_left"
                                            onclick={handleFirst}
                                            disabled={isPrev}
                                            style="margin-right: 5px;"><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <lightning-button label={label.previous}  
                                            icon-name="utility:chevronleft"
                                            onclick={handlePrevious}
                                            disabled={isPrev}><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                    <lightning-layout-item flexibility="grow">
                                        <p class="slds-text-align_center">Page {pageNumber} of {totalPages}</p>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <lightning-button label={label.next}  
                                            icon-name="utility:chevronright"
                                            icon-position="right"
                                            onclick={handleNext}
                                            disabled={isNext}><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <lightning-button label={label.last}  
                                            icon-name="utility:arrow_right"
                                            icon-position="right"
                                            onclick={handleLast}
                                            disabled={isNext}
                                            style="margin-left: 5px;"><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                </lightning-layout>
                            </template>
                        </div>
                    </lightning-layout-item>
                </template>
                <template if:true={isLastSeen}>
                    <lightning-layout-item size="12" style="margin-left: 35%; width: 31%;">
                        <div class="slds-var-m-vertical_medium">
                            <template if:true={vProductsDisplayed}>
                                <lightning-layout>
                                    <lightning-layout-item>
                                        <lightning-button label={label.first}  
                                            icon-name="utility:arrow_left"
                                            onclick={handleFirstV}
                                            disabled={isPrevV}
                                            style="margin-right: 5px;"><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <lightning-button label={label.previous}  
                                            icon-name="utility:chevronleft"
                                            onclick={handlePreviousV}
                                            disabled={isPrevV}><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                    <lightning-layout-item flexibility="grow">
                                        <p class="slds-text-align_center">Page {pageNumber} of {totalPages}</p>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <lightning-button label={label.next}  
                                            icon-name="utility:chevronright"
                                            icon-position="right"
                                            onclick={handleNextV}
                                            disabled={isNextV}><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <lightning-button label={label.last} 
                                            icon-name="utility:arrow_right"
                                            icon-position="right"
                                            onclick={handleLastV}
                                            disabled={isNextV}
                                            style="margin-left: 5px;"><a href="#page1"></a></lightning-button>
                                    </lightning-layout-item>
                                </lightning-layout>
                            </template>
                        </div>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
        </template>
        <template if:true={isDetail}>
            <c-product-details product-id={selectedProductId} ongohome={handleGoHome}></c-product-details>
        </template>
    </template>
    <template if:true={isMyMeetings}>
        <c-my-meetings></c-my-meetings>
    </template>
</template>
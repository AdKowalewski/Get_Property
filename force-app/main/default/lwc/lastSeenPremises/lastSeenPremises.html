<template>
    <template if:true={isLogged}>
        <template if:false={isDetail}>
            <lightning-layout multiple-rows="true" class="slds-card">
                <lightning-layout-item size="12" style="background-color: #000066;">
                    <div class="slds-text-title" style="font-size: 25px; font-weight: bold; margin-left: 40%; width: 40%; margin-top: 1%; margin-bottom: 1%; color: white;">{label.recentlyviewedpremises}</div>
                </lightning-layout-item>
                <lightning-layout-item size="12" style="background-color: #000066;">
                    <div style="margin-left: 30%; width: 40%; margin-bottom: 2%;">           
                        <lightning-layout horizontal-align="middle" multiple-rows="true">
                            <lightning-layout-item size="12">
                                <lightning-input style="-webkit-text-fill-color:white;" type="text" label={label.productname} value={seenProductName} onchange={handleSeenName}></lightning-input>
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <lightning-input style="-webkit-text-fill-color:white;" type="text" label={label.productcity} value={seenProductCity} onchange={handleSeenCity}></lightning-input>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>               
                </lightning-layout-item>

                <template if:true={loading}>
                    <lightning-spinner variant="brand" alternative-text="Loading..." size="medium"></lightning-spinner>
                </template>

                <lightning-layout-item size="12" style="margin: 1%; width: 98%;">
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="12">
                            <template if:false={isLogged}>
                                <h2>{label.mustlogin1}</h2>
                            </template>
                            <template if:true={isLogged}>
                                <template if:false={arelastproducts}>
                                    <h2>{label.noproductsfound}</h2>
                                </template>
                                <template if:true={arelastproducts}>
                                    <div class="slds-scrollable_y">
                                        <lightning-layout horizontal-align="center" multiple-rows="true">
                                            <template for:each={lastproducts} for:item="lastproduct">
                                                <lightning-layout-item key={lastproduct.Id} padding="around-small" size="2">
                                                    <c-product-tile product={lastproduct} onproductselect={selectLastProduct} selected-product-id={selectedProductId}></c-product-tile>
                                                </lightning-layout-item>
                                            </template>
                                        </lightning-layout>
                                    </div>
                                </template>
                            </template>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>

                <lightning-layout-item size="12" style="margin-left: 35%; width: 31%;">
                    <div class="slds-var-m-vertical_medium">
                        <template if:true={vProductsDisplayed}>
                            <lightning-layout>
                                <lightning-layout-item>
                                    <lightning-button label={label.first} 
                                        icon-name="utility:arrow_left"
                                        onclick={handleFirstV}
                                        disabled={isPrevV}
                                        style="margin-right: 5px;"><a href="#page1"></a></lightning-button>
                                </lightning-layout-item>
                                <lightning-layout-item>
                                    <lightning-button label={label.previous} 
                                        icon-name="utility:chevronleft"
                                        onclick={handlePreviousV}
                                        disabled={isPrevV}><a href="#page1"></a></lightning-button>
                                </lightning-layout-item>
                                <lightning-layout-item flexibility="grow">
                                    <p class="slds-text-align_center">Page {pageNumber} of {totalPages}</p>
                                </lightning-layout-item>
                                <lightning-layout-item>
                                    <lightning-button label={label.next} 
                                        icon-name="utility:chevronright"
                                        icon-position="right"
                                        onclick={handleNextV}
                                        disabled={isNextV}><a href="#page1"></a></lightning-button>
                                </lightning-layout-item>
                                <lightning-layout-item>
                                    <lightning-button label={label.last} 
                                        icon-name="utility:arrow_right"
                                        icon-position="right"
                                        onclick={handleLastV}
                                        disabled={isNextV}
                                        style="margin-left: 5px;"><a href="#page1"></a></lightning-button>
                                </lightning-layout-item>
                            </lightning-layout>
                        </template>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </template>
        <template if:true={isDetail}>
            <c-product-details product-id={selectedProductId} ongohome={handleGoHome}></c-product-details>
        </template>
    </template>
    <template if:false={isLogged}>
        <lightning-layout multiple-rows="true">
            <lightning-layout-item size="12">
                <div class="slds-text-title" style="font-size: 20px; padding: 10px; margin-left: 41%;">{label.recentlyviewedpremises}</div>
            </lightning-layout-item>
            <lightning-layout-item size="12">
                <h2 style="margin-left: 1%; margin-bottom: 1%;">{label.mustlogin1}</h2>
            </lightning-layout-item>
        </lightning-layout>
    </template>
</template>